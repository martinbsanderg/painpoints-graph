{"ast":null,"code":"import { jsx } from 'react/jsx-runtime';\nimport { useCallback } from 'react';\nimport { useStore, useNodeId, getRectOfNodes, internalsSymbol, Position } from '@reactflow/core';\nimport cc from 'classcat';\nimport { shallow } from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\nconst selector = state => state.domNode?.querySelector('.react-flow__renderer');\nfunction NodeToolbarPortal(_ref) {\n  let {\n    children\n  } = _ref;\n  const wrapperRef = useStore(selector);\n  if (!wrapperRef) {\n    return null;\n  }\n  return createPortal(children, wrapperRef);\n}\nconst nodeEqualityFn = (a, b) => a?.positionAbsolute?.x === b?.positionAbsolute?.x && a?.positionAbsolute?.y === b?.positionAbsolute?.y && a?.width === b?.width && a?.height === b?.height && a?.selected === b?.selected && a?.[internalsSymbol]?.z === b?.[internalsSymbol]?.z;\nconst nodesEqualityFn = (a, b) => {\n  return a.length === b.length && a.every((node, i) => nodeEqualityFn(node, b[i]));\n};\nconst storeSelector = state => ({\n  transform: state.transform,\n  nodeOrigin: state.nodeOrigin,\n  selectedNodesCount: state.getNodes().filter(node => node.selected).length\n});\nfunction getTransform(nodeRect, transform, position, offset) {\n  // position === Position.Top\n  let xPos = (nodeRect.x + nodeRect.width / 2) * transform[2] + transform[0];\n  let yPos = nodeRect.y * transform[2] + transform[1] - offset;\n  let xShift = -50;\n  let yShift = -100;\n  switch (position) {\n    case Position.Right:\n      xPos = (nodeRect.x + nodeRect.width) * transform[2] + transform[0] + offset;\n      yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n      xShift = 0;\n      yShift = -50;\n      break;\n    case Position.Bottom:\n      yPos = (nodeRect.y + nodeRect.height) * transform[2] + transform[1] + offset;\n      yShift = 0;\n      break;\n    case Position.Left:\n      xPos = nodeRect.x * transform[2] + transform[0] - offset;\n      yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n      xShift = -100;\n      yShift = -50;\n      break;\n  }\n  return `translate(${xPos}px, ${yPos}px) translate(${xShift}%, ${yShift}%)`;\n}\nfunction NodeToolbar(_ref2) {\n  let {\n    nodeId,\n    children,\n    className,\n    style,\n    isVisible,\n    position = Position.Top,\n    offset = 10,\n    ...rest\n  } = _ref2;\n  const contextNodeId = useNodeId();\n  const nodesSelector = useCallback(state => {\n    const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\n    return nodeIds.reduce((acc, id) => {\n      const node = state.nodeInternals.get(id);\n      if (node) {\n        acc.push(node);\n      }\n      return acc;\n    }, []);\n  }, [nodeId, contextNodeId]);\n  const nodes = useStore(nodesSelector, nodesEqualityFn);\n  const {\n    transform,\n    nodeOrigin,\n    selectedNodesCount\n  } = useStore(storeSelector, shallow);\n  const isActive = typeof isVisible === 'boolean' ? isVisible : nodes.length === 1 && nodes[0].selected && selectedNodesCount === 1;\n  if (!isActive || !nodes.length) {\n    return null;\n  }\n  const nodeRect = getRectOfNodes(nodes, nodeOrigin);\n  const zIndex = Math.max(...nodes.map(node => (node[internalsSymbol]?.z || 1) + 1));\n  const wrapperStyle = {\n    position: 'absolute',\n    transform: getTransform(nodeRect, transform, position, offset),\n    zIndex,\n    ...style\n  };\n  return jsx(NodeToolbarPortal, {\n    children: jsx(\"div\", {\n      style: wrapperStyle,\n      className: cc(['react-flow__node-toolbar', className]),\n      ...rest,\n      children: children\n    })\n  });\n}\nexport { NodeToolbar };","map":{"version":3,"names":["jsx","useCallback","useStore","useNodeId","getRectOfNodes","internalsSymbol","Position","cc","shallow","createPortal","selector","state","domNode","querySelector","NodeToolbarPortal","_ref","children","wrapperRef","nodeEqualityFn","a","b","positionAbsolute","x","y","width","height","selected","z","nodesEqualityFn","length","every","node","i","storeSelector","transform","nodeOrigin","selectedNodesCount","getNodes","filter","getTransform","nodeRect","position","offset","xPos","yPos","xShift","yShift","Right","Bottom","Left","NodeToolbar","_ref2","nodeId","className","style","isVisible","Top","rest","contextNodeId","nodesSelector","nodeIds","Array","isArray","reduce","acc","id","nodeInternals","get","push","nodes","isActive","zIndex","Math","max","map","wrapperStyle"],"sources":["/Users/martinbsandberg/Documents/GitHub/painpoints-graph/node_modules/@reactflow/node-toolbar/dist/esm/index.js"],"sourcesContent":["import { jsx } from 'react/jsx-runtime';\nimport { useCallback } from 'react';\nimport { useStore, useNodeId, getRectOfNodes, internalsSymbol, Position } from '@reactflow/core';\nimport cc from 'classcat';\nimport { shallow } from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\n\nconst selector = (state) => state.domNode?.querySelector('.react-flow__renderer');\nfunction NodeToolbarPortal({ children }) {\n    const wrapperRef = useStore(selector);\n    if (!wrapperRef) {\n        return null;\n    }\n    return createPortal(children, wrapperRef);\n}\n\nconst nodeEqualityFn = (a, b) => a?.positionAbsolute?.x === b?.positionAbsolute?.x &&\n    a?.positionAbsolute?.y === b?.positionAbsolute?.y &&\n    a?.width === b?.width &&\n    a?.height === b?.height &&\n    a?.selected === b?.selected &&\n    a?.[internalsSymbol]?.z === b?.[internalsSymbol]?.z;\nconst nodesEqualityFn = (a, b) => {\n    return a.length === b.length && a.every((node, i) => nodeEqualityFn(node, b[i]));\n};\nconst storeSelector = (state) => ({\n    transform: state.transform,\n    nodeOrigin: state.nodeOrigin,\n    selectedNodesCount: state.getNodes().filter((node) => node.selected).length,\n});\nfunction getTransform(nodeRect, transform, position, offset) {\n    // position === Position.Top\n    let xPos = (nodeRect.x + nodeRect.width / 2) * transform[2] + transform[0];\n    let yPos = nodeRect.y * transform[2] + transform[1] - offset;\n    let xShift = -50;\n    let yShift = -100;\n    switch (position) {\n        case Position.Right:\n            xPos = (nodeRect.x + nodeRect.width) * transform[2] + transform[0] + offset;\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n            xShift = 0;\n            yShift = -50;\n            break;\n        case Position.Bottom:\n            yPos = (nodeRect.y + nodeRect.height) * transform[2] + transform[1] + offset;\n            yShift = 0;\n            break;\n        case Position.Left:\n            xPos = nodeRect.x * transform[2] + transform[0] - offset;\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n            xShift = -100;\n            yShift = -50;\n            break;\n    }\n    return `translate(${xPos}px, ${yPos}px) translate(${xShift}%, ${yShift}%)`;\n}\nfunction NodeToolbar({ nodeId, children, className, style, isVisible, position = Position.Top, offset = 10, ...rest }) {\n    const contextNodeId = useNodeId();\n    const nodesSelector = useCallback((state) => {\n        const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\n        return nodeIds.reduce((acc, id) => {\n            const node = state.nodeInternals.get(id);\n            if (node) {\n                acc.push(node);\n            }\n            return acc;\n        }, []);\n    }, [nodeId, contextNodeId]);\n    const nodes = useStore(nodesSelector, nodesEqualityFn);\n    const { transform, nodeOrigin, selectedNodesCount } = useStore(storeSelector, shallow);\n    const isActive = typeof isVisible === 'boolean' ? isVisible : nodes.length === 1 && nodes[0].selected && selectedNodesCount === 1;\n    if (!isActive || !nodes.length) {\n        return null;\n    }\n    const nodeRect = getRectOfNodes(nodes, nodeOrigin);\n    const zIndex = Math.max(...nodes.map((node) => (node[internalsSymbol]?.z || 1) + 1));\n    const wrapperStyle = {\n        position: 'absolute',\n        transform: getTransform(nodeRect, transform, position, offset),\n        zIndex,\n        ...style,\n    };\n    return (jsx(NodeToolbarPortal, { children: jsx(\"div\", { style: wrapperStyle, className: cc(['react-flow__node-toolbar', className]), ...rest, children: children }) }));\n}\n\nexport { NodeToolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}